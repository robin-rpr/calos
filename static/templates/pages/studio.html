{% extends 'main.html' %}

{% block title %}
{{id}}
{% endblock %}

{% block navigation %}
<!-- Empty -->
{% endblock %}

{% block searchbar %}
<!-- Empty -->
{% endblock %}

{% block headers %}
<script>
    const promise = fetch('/api/studios/{{id}}')
        .then(r => r.json())
        .then(studio => {
            if (!studio.success) {
                throw new Error(studio.error);
            }
            return studio;
        });
</script>
{% endblock %}

{% block content %}
<div class="content__studio">
    <div class="studio__content">
        <iframe id="iframe" width="100%" height="100%"></iframe>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        promise
            .then(studio => {
                document.getElementById('iframe').src = 
                    `http://${window.location.hostname}:${studio.containers[0].proxy['8080']}`;
            })
            .catch(error => {
                console.error('Failed to load studio:', error);
            });
    });
</script>
{% endblock %}
